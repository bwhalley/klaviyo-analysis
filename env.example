# Klaviyo Analysis - Environment Variables
# Copy this file to .env and fill in your values
# Never commit .env to version control!

# ============================================
# Application
# ============================================
NODE_ENV=production

# ============================================
# Database
# ============================================
DATABASE_URL=postgresql://klaviyo_user:CHANGE_THIS_PASSWORD@db:5432/klaviyo_analysis

# For local development (without Docker):
# DATABASE_URL=postgresql://klaviyo_user:CHANGE_THIS_PASSWORD@localhost:5432/klaviyo_analysis

# ============================================
# Redis Cache
# ============================================
REDIS_URL=redis://redis:6379

# For local development (without Docker):
# REDIS_URL=redis://localhost:6379

# ============================================
# Authentication (NextAuth.js)
# ============================================
NEXTAUTH_URL=http://localhost:3000
# For production, use your actual domain:
# NEXTAUTH_URL=https://yourdomain.com

# Generate with: openssl rand -hex 32
NEXTAUTH_SECRET=GENERATE_A_RANDOM_32_CHAR_STRING_HERE

# ============================================
# Encryption
# ============================================
# Used for encrypting Klaviyo API keys in database
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=GENERATE_A_RANDOM_32_CHAR_STRING_HERE

# ============================================
# Klaviyo API
# ============================================
# Optional: Override the default Klaviyo API base URL
# KLAVIYO_API_BASE_URL=https://a.klaviyo.com/api

# ============================================
# Rate Limiting
# ============================================
# Window for rate limiting in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Login-specific rate limits
LOGIN_RATE_LIMIT_WINDOW_MS=900000
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5

# ============================================
# Security
# ============================================
# Account lockout duration in minutes (default: 30)
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# Maximum failed login attempts before lockout (default: 5)
MAX_FAILED_LOGIN_ATTEMPTS=5

# ============================================
# Monitoring & Logging (Optional)
# ============================================
# Sentry DSN for error tracking
# SENTRY_DSN=

# Log level: debug, info, warn, error
LOG_LEVEL=info

# ============================================
# PostgreSQL Admin (Development Only)
# ============================================
PGADMIN_DEFAULT_EMAIL=admin@klaviyo-analysis.local
PGADMIN_DEFAULT_PASSWORD=CHANGE_THIS_PASSWORD

# ============================================
# Production Only
# ============================================
# Allowed origins for CORS (comma-separated)
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Maximum upload size in MB
# MAX_UPLOAD_SIZE_MB=10

